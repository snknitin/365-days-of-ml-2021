# Day 283 of ML 

## Matplotlib tips and tricks


**Figsize**

```python
from matplotlib import pyplot as plt
import numpy as np

# to update the figure size of an individual figure.
plt.figure(figsize=(10,6)) # The tuple you pass will be read in as (width in inches, width in height).
plt.plot(X, Y)

# Update your run command (rc) parameters to change the size of ALL future figures
plt.rcParams['figure.figsize'] = (4, 4)
plt.rcParams['font.size'] = 16
plt.plot(X, Y);
```

**Saving a fig**

```python

# To save plots - PDF, PNG, SVG
# To increase the resolutions, use the dots per inch or dpi argument, but they take up more space
# bbox_inches to avoid the xlabel from being cutooff in the saved image
plt.savefig('path_to_file.png',dpi = 200,bbox_inches ='tight' )

```

**Adding Math like Latex**

```python
# Adding Math Symbols with TEX 
# Use 2 $ around the equation string and use r'$ $'

plt.plot(X, Y2, X, Y, X, Y_log)
plt.xlabel(r'$x \in [1, \infty)$', fontsize=14)
plt.ylabel(r'$y$',fontsize=14)
plt.legend([r'$y=x^2$', r'$y=x$', r'$y=\ln\;x$'], fontsize=12)
plt.title('Comparison of $\mathcal{O}(x^2)$, $\mathcal{O}(x)$, and $\mathcal{O}(\ln\;x)$', fontsize=16)
plt.text(3.4, 8, 'Rapid growth\nwhen $y \sim \mathcal{O}(x^2)$', fontsize=14, color='gray')

ax = plt.gca()
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)
```

**Legend**

```python
# Legend
# If you want to order them, extract the plots as lines and send to the handles argument
line_1, = plt.plot(x, y, label='blue')
line_2, = plt.plot(x, y+2, color='orange', label='orange')
plt.legend(handles=[line_2, line_1]);

# Box location - default is 'best'
# out of the nine basic locations) with the minimum overlay. 
# This option can be slow if there are many elements drawn on the figure.
plt.legend(loc='lower right')


# Outside the figure
# figure ranges from 0-1 on x and y axis . This loc here is about where the legend box goes
plt.legend(bbox_to_anchor=(1.05, 1), loc='upper left')
plt.legend(bbox_to_anchor=(-0.05, 0), loc='lower right')

# To make legend horizontal instead of vertical 
plt.legend(ncol=2);
plt.legend(ncol=3, bbox_to_anchor=(0.5, -0.1), loc='upper center')


# Changing legend properties 
plt.legend(prop={'weight': 'bold', 'size': 14, 'family': 'serif'})
plt.legend(labelcolor=['blue', 'orange'])   # Font color of each label
plt.legend(frameon=False)                   # Removes the box around legend
plt.legend(title='line colors')             # Adds a title above legends 
plt.legend(facecolor='lightgray')

```


**Adding Baselines**

```python

plt.plot(X, Y)
plt.axhline(2)   # Adds a horizontal line at y=2
plt.axvline(5, ymin=0.2, ymax=.8) # Adds a vertical line with length constraints


# Styling 
# Add zorder to plot the baseline first and 
# then choose zorder=2 for the other plot so that it overlays the baseline and is in the front
# Add label so that it gets picked up in legend

plt.plot(X, Y, lw=4, zorder=2)
plt.axhline(2, color='orangered', lw=4, ls='--',zorder=1, label='baseline') # different color, linewidth and dashes for line style

```


**Adding Shapes to figures**

```python
from matplotlib.patches import Rectangle, Circle,Ellipse,RegularPolygon
plt.scatter(X, Y, alpha=0.7)

rect = Rectangle((0, 0), 8, 12, fill=False,angle=15) # bottom left corner, width height. Fill is falls so that it is transparent and angle can change rotation 
plt.gca().add_patch(rect) # grab current axes and add patch


circle = Circle((0,0), 6, fill=False) # center and radius
plt.gca().add_patch(circle);


# Use in conjuction with the baselines to point to something
plt.axvline(5, ymax=0.87, ls='--', color='red', alpha=0.6)
plt.axhline(5, xmax=0.46, ls='--', color='red', alpha=0.6)

cir = Circle((5, 5), 0.5, color='red', lw=3, fill=False, zorder=10)

# Ellipse 
ellipse = Ellipse((0,0), 5, 20, fill=False, lw=4, color='red')
plt.gca().add_patch(ellipse);
# Ploygon 
poly = RegularPolygon((-3, -4), 8, alpha=0.7, color='gray')  
plt.gca().add_patch(poly);
```



**Adding Patterns**

hatch can be /,x,* 
You can also add patterns to patches and shapes or to pie charts 
```python
plt.bar(range(len(values)), values, hatch='/');


# Adding patches only to specific bars in a bar plot
patterns = ['', '\\', '']
# Save the output and iterate over them
bars = plt.bar(range(len(values)), values)

for bar, pattern in zip(bars, patterns):
    bar.set_hatch(pattern);


# Pie chart
wedges, labels = plt.pie(values)
wedges[0].set_hatch('|')


# If you have want to fill betwee two different curves, send 2 y values
plt.fill_between(x, y1, y2, hatch='.');

# To have constant styling for all bars 
plt.rcParams['hatch.color'] = 'blue'
plt.rcParams['hatch.linewidth'] = 6
```



**Add shading**

Useful for shading parts of graphs, especially when dealing with time series 

```python
plt.axvspan(10, 13) # Add vertical shading from x values 10-13
plt.axvspan(10, 13, ymin=0.5, ymax=0.75);

plt.axhspan(11, 14);
plt.axhspan(11, 14, xmin=0.25, xmax=0.5);

# Time series on X axis
plt.xticks([datetime(2019, 12, 1), datetime(2020, 1, 1), 
            datetime(2020, 2, 1),datetime(2020, 3, 1)], 
           ['Dec\n2019', 'Jan\n2020', 'Feb\n2020', 'March\n2020'], 
           rotation=0, 
           ha='center'
          ) 
plt.xlim(datetime(2019, 11, 10), datetime(2020, 3, 20))
plt.ylim(50, 150)

#add shading
plt.axvspan(datetime(2019, 11, 10), datetime(2020, 1, 1), color='lightgray', alpha=0.5)

#add text: 2019, 2020
plt.text(datetime(2019, 12, 15), 140, '2019', fontsize=16, color='gray')
plt.text(datetime(2020, 1, 5), 140, '2020', fontsize=16, color='black')
sns.despine(); # Removes the upper and right lines of a graph. You can select to remove left and bottom too 

#add shading with pattern
p = plt.axvspan(x_mean, x_end, alpha=0.2)
p.set_hatch('/')
plt.xlim(None, x_end);
```

** **

```python


```


** **

```python


```


** **

```python


```

**References**
------------
[1]  https://www.youtube.com/playlist?list=PLtPIclEQf-3dJmAj3IsSRwRoLbX-n3J81  
[2] https://github.com/kimfetti/Videos/blob/master/Matplotlib_Tips/06_shapes.ipynb  
